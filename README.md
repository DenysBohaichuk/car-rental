# Тестове завдання PHP/JS: Підрахунок днів, коли авто було вільне

## Опис завдання
Мета завдання — реалізувати алгоритм, який визначає кількість днів, коли автомобіль був вільний у зазначений період, відповідно до заданих критеріїв:
- Автомобіль вважається вільним, якщо він був не зайнятий **9 і більше годин підряд з 9 ранку до 9 вечора**.
- До уваги беруться лише:
    - Авто з `status=1`
    - Авто з `company_id=1`
    - Авто з `is_deleted!=1`
- **`payment_status` не враховується**.
- Дані мають бути відсортовані за `car_id` у порядку зростання.

## Алгоритм роботи

1. **Фільтрація та сортування даних**:
    - Зчитуються записи про бронювання автомобілів.
    - Враховуються тільки записи, які відповідають зазначеним критеріям (`status=1`, `company_id=1`, `is_deleted!=1`).
    - Дані виводяться у вигляді списку, відсортованого за `car_id`.

2. **Періоди зайнятості**:
    - Для кожного автомобіля обчислюються періоди, коли він зайнятий.
    - Спочатку перевіряється перший день оренди автомобіля на зайнятість, потім останній день оренди, та всі дні між ними позначаються як зайняті.
    - Алгоритм визначає зайняті дні автомобілів на основі бронювань у заданому періоді. Він враховує специфіку робочого часу дня (9:00–21:00) і мінімальний час для вільного дня (9 годин). Алгоритм працює послідовно, розбиваючи бронювання на три основні частини: **початковий день**, **останній день** і **дні між ними**.

   ### Етапи алгоритму

   #### 1. **Ініціалізація**
    - Отримуються вхідні параметри:
        - **Період перевірки:** `periodStartDate` та `periodEndDate`.
        - **Години роботи дня:** `startTime` (9:00) та `endTime` (21:00).
        - **Мінімальний час для вільного дня:** 9 годин (32400 секунд).
        - **Часовий пояс:** обробка дат з урахуванням заданого часового поясу.
    - Завантажується список автомобілів із бронюваннями.

   #### 2. **Обробка кожного автомобіля**
    - Для кожного автомобіля:
        - Ініціалізується список зайнятих днів (`occupiedDays`) і попередня дата закінчення бронювання (`prevEndDate`).
        - Кожне бронювання обробляється послідовно.

   #### 3. **Обробка бронювання**
    - **Конвертація та корекція дат:**
        - Дати початку (`currentStartDate`) і кінця (`currentEndDate`) конвертуються в потрібний часовий пояс.
        - Якщо дати виходять за межі періоду перевірки, вони коригуються.
    - **Визначення меж робочого дня:**
        - `dayStart`: 9:00 того ж дня, коли починається бронювання.
        - `dayEnd`: 21:00 того ж дня.
        - `lastDayStart`: 9:00 останнього дня бронювання.
        - `lastDayEnd`: 21:00 останнього дня бронювання.

    - **Перевірка зайнятості:**
      Алгоритм розглядає три сценарії:
        - **Початковий день:**
            - Якщо бронювання починається між 9:00 і 21:00:
                - Якщо є попереднє бронювання, перевіряється, чи перерва між ними менша за 9 годин.
                - Якщо перерви немає або її недостатньо, день позначається як зайнятий.
            - Якщо бронювання починається раніше 9:00, додається зайнятість для ранкового періоду.
        - **Останній день:**
            - Якщо бронювання закінчується після 9:00, перевіряється:
                - Чи достатньо часу між кінцем бронювання і 21:00 для вільного дня.
                - Якщо часу недостатньо, день позначається як зайнятий.
        - **Дні між початком і кінцем бронювання:**
            - Усі дні між першим і останнім автоматично позначаються як зайняті, оскільки повністю входять у бронювання.

   #### 4. **Збереження зайнятих днів**
    - Дні додаються до списку `occupiedDays`.

   #### 5. **Розрахунок вільних днів**
    - Загальна кількість днів у періоді: `totalPeriodDays`.
    - Кількість вільних днів: `totalPeriodDays - count(occupiedDays)`.

3. **Підрахунок вільних днів**:
    - Від загальної к-ть днів в місяці, віднімаємо к-ть зайнятих днів

4. **Виведення інформації**:
    - Виводимо інформацію про відфільтровані автомобілі.


    
## Розвертання проєкту на "Хостинг Україна" 
https://www.ukraine.com.ua/

**детальну інформацію як розвернути проєкт, ви можете отримати за цим посиланням:**
https://www.ukraine.com.ua/uk/wiki/hosting/php/frameworks/laravel/transfer-to-hosting/


